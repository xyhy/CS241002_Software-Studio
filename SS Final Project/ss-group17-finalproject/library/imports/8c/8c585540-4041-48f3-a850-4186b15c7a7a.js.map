{"version":3,"sources":["../../../../assets/Script/assets/Script/scene_manage.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAyC,+BAAY;IADrD;QAAA,qEAgNC;QA9MwB,iBAAW,GAAc,IAAI,CAAC;QAG3C,sBAAgB,GAAG,CAAC,CAAC;QACtB,gBAAU,GAAG,IAAI,CAAC;;IA0M7B,CAAC;IAxMG,4BAAM,GAAN;QACI,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1C,CAAC;IAED,2BAAK,GAAL;QACI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,iBAAiB,GAAG,CAAC,EAAE,EAAC,EAAE,EAAC,EAAE,CAAC,CAAC;QACpC,IAAI,CAAC,YAAY,GAAG,CAAC,EAAE,EAAC,EAAE,EAAC,EAAE,CAAC,CAAC;QAE/B,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,EAAE,EAAC;YAChB,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,EAAE,EAAC;gBAChB,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACtC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACpC;SACJ;QACD,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED,kCAAY,GAAZ,UAAa,UAAkB,EAAE,IAAY;QAA7C,iBAkFC;QAjFG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QACrC,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAElC,IAAG,IAAI,IAAI,YAAY,EAAC;YACpB,IAAI,MAAI,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAC,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;YACzD,MAAI,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC;YAC9B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EACxC,EAAE,CAAC,IAAI,EAAE,EACT,MAAI,EACJ,EAAE,CAAC,QAAQ,CAAC;gBAAK,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,EAAE;oBAC/C,KAAI,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAI,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBAClD,KAAI,CAAC,uBAAuB,EAAE,CAAC;oBAC/B,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC9B,CAAC,CAAC,CAAC;YAAA,CAAC,CAAC,CACR,CAAC,CAAA;SACL;aACI,IAAG,IAAI,IAAI,WAAW,EAAC;YACxB,IAAI,MAAI,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;YACtD,MAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EACzC,EAAE,CAAC,IAAI,EAAE,EACT,MAAI,EACJ,EAAE,CAAC,QAAQ,CAAC;gBAAK,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,EAAE;oBAC/C,KAAI,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAI,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBAClD,KAAI,CAAC,uBAAuB,EAAE,CAAC;oBAC/B,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC9B,CAAC,CAAC,CAAC;YAAA,CAAC,CAAC,CACR,CAAC,CAAA;SACL;aACI,IAAG,IAAI,IAAI,UAAU,EAAC;YACvB,IAAI,MAAI,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACtD,MAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,MAAM,CAAC,CAAC,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EACvC,EAAE,CAAC,IAAI,EAAE,EACT,MAAI,EACJ,EAAE,CAAC,QAAQ,CAAC;gBAAK,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,EAAE;oBAC/C,KAAI,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAI,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBAClD,KAAI,CAAC,uBAAuB,EAAE,CAAC;oBAC/B,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC9B,CAAC,CAAC,CAAC;YAAA,CAAC,CAAC,CACR,CAAC,CAAA;SACL;aACI,IAAG,IAAI,IAAI,aAAa,EAAC;YAC1B,IAAI,MAAI,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACrD,MAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,MAAM,CAAC,CAAC,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EACxC,EAAE,CAAC,IAAI,EAAE,EACT,MAAI,EACJ,EAAE,CAAC,QAAQ,CAAC;gBAAK,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,EAAE;oBAC/C,KAAI,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAI,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBAClD,KAAI,CAAC,uBAAuB,EAAE,CAAC;oBAC/B,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC9B,CAAC,CAAC,CAAC;YAAA,CAAC,CAAC,CACR,CAAC,CAAA;SACL;aACI,IAAG,IAAI,IAAI,MAAM,EAAC;YACnB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CACvB,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EACd,EAAE,CAAC,QAAQ,CAAC;gBAAK,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,EAAE;oBAC/C,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;oBACrC,KAAI,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,KAAI,CAAC,uBAAuB,EAAE,CAAC;oBAC/B,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC9B,CAAC,CAAC,CAAC;YAAA,CAAC,CAAC,CACR,CACJ,CAAA;SACJ;aACG;YACA,EAAE,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;SAC5C;IACL,CAAC;IAED,gCAAU,GAAV;QACI,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IAC/D,CAAC;IAED,6CAAuB,GAAvB;QACI,IAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG;YAAE,OAAO;QAEjD,IAAI,KAAK,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC;QACxC,IAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,EAAC;YACnE,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAC1E,EAAE,CAAC,IAAI,CAAC,+CAA+C,CAAC,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SAC7H;IACL,CAAC;IAED,0CAAoB,GAApB;QACI,IAAI,KAAK,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC;QACxC,yCAAyC;QACzC,OAAO,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC;IAC9E,CAAC;IAED,6CAAuB,GAAvB;QACI,IAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,OAAO;YAAE,OAAO;QAE3F,IAAI,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC1C,EAAE,CAAC,IAAI,GAAG,kBAAkB,CAAC;QAC7B,EAAE,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACrD,IAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,gBAAgB,EAAC;YAC/C,EAAE,CAAC,IAAI,CAAC,+CAA+C,CAAC,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACzH;QACD,EAAE,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;IACtC,CAAC;IAED,mCAAa,GAAb,UAAc,UAAkB,EAAE,IAAY;QAC1C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAG,UAAU,CAAC,CAAC,CAAC,IAAI,GAAG,EAAC;YACpB,IAAG,UAAU,IAAI,MAAM;gBAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;iBACnD,IAAG,UAAU,IAAI,QAAQ;gBAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;;gBAC1D,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SACvC;aACG;YACA,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAClF;QACD,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,0CAAoB,GAApB,UAAqB,UAAkB;QACnC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;IAC1C,CAAC;IAED,kCAAY,GAAZ,UAAa,UAAkB;QAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;IAC1C,CAAC;IAED,0CAAoB,GAApB;QACI,IAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,OAAO;YAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC;;YAC/J,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC;IACnG,CAAC;IAED,sCAAgB,GAAhB;QACI,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,wCAAkB,GAAlB;QACI,IAAI,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC;QACvC,QAAQ,IAAI,EAAE;YACV,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAAA,MAAM;YACnD,KAAK,MAAM;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;gBAAA,MAAM;YAC1D,KAAK,YAAY;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;gBAAA,MAAM;YAChE,KAAK,YAAY;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YACzD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAAA,MAAM;YACrD,KAAK,QAAQ;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;gBAAA,MAAM;YAC5D,KAAK,YAAY;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YACzD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAAA,MAAM;YAClD,KAAK,KAAK;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAAA,MAAM;YACrD,KAAK,QAAQ;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;gBAAA,MAAM;YAC5D,KAAK,YAAY;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBAAA,MAAM;YAC3D,KAAK,OAAO;gBAAE,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;gBAAA,MAAM;YAC/D,OAAO,CAAC,CAAC,MAAM;SAClB;IACL,CAAC;IAED,oCAAc,GAAd;QACI,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IA7MoB;QAApB,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oDAA+B;IADlC,WAAW;QAD/B,OAAO;OACa,WAAW,CA+M/B;IAAD,kBAAC;CA/MD,AA+MC,CA/MwC,EAAE,CAAC,SAAS,GA+MpD;kBA/MoB,WAAW","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class SceneManage extends cc.Component {\n    @property(cc.Prefab) berry_count :cc.Prefab = null; \n    private strawberry_record :boolean[][];\n    private level_record :boolean[][];\n    private strawberry_count = 0;\n    public first_time = true;\n\n    onLoad (){\n        cc.game.addPersistRootNode(this.node);\n    }\n\n    start () {\n        this.node.runAction(cc.fadeOut(2));\n        this.strawberry_count = 0;\n        this.strawberry_record = [[],[],[]];\n        this.level_record = [[],[],[]];\n        \n        for(let i=0;i<3;i++){\n            for(let j=0;j<5;j++){\n                this.strawberry_record[i].push(false);\n                this.level_record[i].push(false);\n            }\n        }\n        this.level_record[0][0] = true;\n        this.first_time = true;\n    }\n\n    change_scene(scene_name :string, type :string){\n        this.set_curtain_position();\n        this.node.setContentSize(cc.winSize);\n        cc.director.preloadScene(scene_name);\n        this.node.stopAllActions();\n        this.node.runAction(cc.fadeIn(0));\n\n        if(type == \"from_right\"){\n            let move = cc.moveBy(0.5, cc.v2(-1*cc.winSize.width, 0));\n            move.easing(cc.easeSineOut());\n            this.node.runAction(cc.sequence(\n                cc.moveBy(0, cc.v2(cc.winSize.width, 0)),\n                cc.show(),\n                move,\n                cc.callFunc(()=>{cc.director.loadScene(scene_name, ()=>{\n                    this.set_curtain_position();\n                    this.node.runAction(cc.sequence(move, cc.hide()));\n                    this.create_strawberry_count();\n                    this.preload_next_level();\n                });})\n            ))\n        }\n        else if(type == \"from_left\"){\n            let move = cc.moveBy(0.5, cc.v2(cc.winSize.width, 0));\n            move.easing(cc.easeSineInOut());\n            this.node.runAction(cc.sequence(\n                cc.moveBy(0, cc.v2(-cc.winSize.width, 0)),\n                cc.show(),\n                move,\n                cc.callFunc(()=>{cc.director.loadScene(scene_name, ()=>{\n                    this.set_curtain_position();\n                    this.node.runAction(cc.sequence(move, cc.hide()));\n                    this.create_strawberry_count();\n                    this.preload_next_level();\n                });})\n            ))\n        }\n        else if(type == \"from_top\"){\n            let move = cc.moveBy(0.5,cc.v2(0,-cc.winSize.height));\n            move.easing(cc.easeSineInOut());\n            this.node.runAction(cc.sequence(\n                cc.moveBy(0,cc.v2(0,cc.winSize.height)),\n                cc.show(),\n                move,\n                cc.callFunc(()=>{cc.director.loadScene(scene_name, ()=>{\n                    this.set_curtain_position();\n                    this.node.runAction(cc.sequence(move, cc.hide()));\n                    this.create_strawberry_count();\n                    this.preload_next_level();\n                });})\n            ))\n        }\n        else if(type == \"from_bottom\"){\n            let move = cc.moveBy(0.5,cc.v2(0,cc.winSize.height));\n            move.easing(cc.easeSineInOut());\n            this.node.runAction(cc.sequence(\n                cc.moveBy(0,cc.v2(0,-cc.winSize.height)),\n                cc.show(),\n                move,\n                cc.callFunc(()=>{cc.director.loadScene(scene_name, ()=>{\n                    this.set_curtain_position();\n                    this.node.runAction(cc.sequence(move, cc.hide()));\n                    this.create_strawberry_count();\n                    this.preload_next_level();\n                });})\n            ))\n        }\n        else if(type == \"fade\"){\n            this.node.runAction(cc.sequence(\n                    cc.fadeIn(0.5),\n                    cc.callFunc(()=>{cc.director.loadScene(scene_name, ()=>{\n                        this.node.runAction(cc.fadeOut(0.5));\n                        this.set_curtain_position();\n                        this.create_strawberry_count();\n                        this.preload_next_level();\n                    });})\n                )\n            )\n        }\n        else{\n            cc.log(\"Error: unknown transition type\");\n        }\n    }\n\n    die_reload(){\n        this.first_time = false;\n        this.change_scene(cc.director.getScene().name, \"from_top\");\n    }\n\n    update_strawberry_state(){\n        if(cc.director.getScene().name[0] == 'a') return;\n\n        let level = cc.director.getScene().name;\n        if(!this.strawberry_record[parseInt(level[0])-1][parseInt(level[2])-1]){\n            this.strawberry_count++;\n            this.strawberry_record[parseInt(level[0])-1][parseInt(level[2])-1] = true;\n            cc.find(\"All Nodes/Canvas/Main Camera/strawberry_count\").getComponent(\"strawberry_count\").increase(this.strawberry_count);\n        }\n    }\n\n    get_strawberry_state(){\n        let level = cc.director.getScene().name;\n        // cc.log(\"sc=\" + this.strawberry_count);\n        return this.strawberry_record[parseInt(level[0])-1][parseInt(level[2])-1];\n    }\n\n    create_strawberry_count(){\n        if(cc.director.getScene().name[0] == 'a' || cc.director.getScene().name == 'final') return;\n\n        let nd = cc.instantiate(this.berry_count);\n        nd.name = \"strawberry_count\";\n        cc.find(\"All Nodes/Canvas/Main Camera\").addChild(nd);\n        if(cc.director.getScene().name == \"chapter select\"){\n            cc.find(\"All Nodes/Canvas/Main Camera/strawberry_count\").getComponent(\"strawberry_count\").show(this.strawberry_count);\n        }\n        cc.log(\"create_strawberry_count\");\n    }\n\n    go_next_level(scene_name :string, type :string){\n        this.first_time = true;\n        if(scene_name[0] == \"b\"){\n            if(scene_name == \"boss\") this.level_record[0][4] = true;\n            else if(scene_name == \"boss_2\") this.level_record[1][4] = true;\n            else this.level_record[2][4] = true;\n        }\n        else{\n            this.level_record[parseInt(scene_name[0])-1][parseInt(scene_name[2])-1] = true;\n        }\n        this.change_scene(scene_name, type);\n    }\n\n    enter_selected_level(scene_name :string){\n        this.first_time = true;\n        this.change_scene(scene_name, \"fade\");\n    }\n\n    go_animation(scene_name :string){\n        this.first_time = true;\n        this.change_scene(scene_name, \"fade\");\n    }\n\n    set_curtain_position(){\n        if(cc.director.getScene().name[0] == \"a\" || cc.director.getScene().name == \"final\") this.node.position = cc.find(\"Canvas/Main Camera\").position.add(cc.v2(480,320));\n        else this.node.position = cc.find(\"All Nodes/Canvas/Main Camera\").position.add(cc.v2(480,320));\n    }\n\n    get_level_record(){\n        return this.level_record;\n    }\n\n    preload_next_level(){\n        let name = cc.director.getScene().name;\n        switch (name) {\n            case \"1-1\": cc.director.preloadScene(\"1-2\");break;\n            case \"1-2\": cc.director.preloadScene(\"1-3\");break;\n            case \"1-3\": cc.director.preloadScene(\"1-4\");break;\n            case \"1-4\": cc.director.preloadScene(\"boss\");break;\n            case \"boss\": cc.director.preloadScene(\"animation1\");break;\n            case \"animation1\": cc.director.preloadScene(\"animation2\");break;\n            case \"animation2\": cc.director.preloadScene(\"2-1\");break;\n            case \"2-1\": cc.director.preloadScene(\"2-2\");break;\n            case \"2-2\": cc.director.preloadScene(\"2-3\");break;\n            case \"2-3\": cc.director.preloadScene(\"2-4\");break;\n            case \"2-4\": cc.director.preloadScene(\"boss_2\");break;\n            case \"boss_2\": cc.director.preloadScene(\"animation3\");break;\n            case \"animation3\": cc.director.preloadScene(\"3-1\");break;\n            case \"3-1\": cc.director.preloadScene(\"3-2\");break;\n            case \"3-2\": cc.director.preloadScene(\"3-3\");break;\n            case \"3-3\": cc.director.preloadScene(\"3-4\");break;\n            case \"3-4\": cc.director.preloadScene(\"boss_3\");break;\n            case \"boss_3\": cc.director.preloadScene(\"animation4\");break;\n            case \"animation4\": cc.director.preloadScene(\"final\");break;\n            case \"final\": cc.director.preloadScene(\"chapter select\");break;\n            default: break;\n        }\n    }\n\n    get_first_time(){\n        return this.first_time;\n    }\n}\n"]}