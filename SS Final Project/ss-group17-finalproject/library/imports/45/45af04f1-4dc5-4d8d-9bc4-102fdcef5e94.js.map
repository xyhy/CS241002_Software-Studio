{"version":3,"sources":["../../../../assets/Script/assets/Script/pause.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEA+EC;QA3EG,SAAG,GAAiB,IAAI,CAAC;QAEjB,cAAQ,GAAG,KAAK,CAAC;;IAyE7B,CAAC;IAvEG,yBAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QACjD,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,wBAAK,GAAL;QACI,wBAAwB;QACxB,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAE/E,CAAC;IAED,4BAAS,GAAT;QACI,EAAE,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;IAC/B,CAAC;IAED,4BAAS,GAAT,UAAU,CAAC;QACP,QAAQ,CAAC,CAAC,OAAO,EAAE;YACf,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACtB,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;gBACrB,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;gBACxB,IAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACf,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;oBACf,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,IAAI,EAAE;wBACtD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;qBAChE;oBACD,EAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;oBACpB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;oBAChD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;iBACxB;qBACI;oBACD,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;oBAChB,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,IAAI,EAAE;wBACtD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;qBAC/D;oBACD,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;oBACrB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;oBACjD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;iBACzB;gBACD,MAAM;aACT;SACJ;IACL,CAAC;IAED,gCAAa,GAAb,UAAc,KAAK,EAAE,IAAI;QACrB,IAAG,IAAI,IAAI,QAAQ,EAAE;YACjB,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACjB,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,IAAI,EAAE;gBACtD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;aAC/D;YACD,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;YACjD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACzB;aACI,IAAG,IAAI,IAAI,SAAS,EAAE;YACvB,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAClB,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACrB,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,UAAU,EAAE,CAAC;SACrE;aACI,IAAG,IAAI,IAAI,MAAM,EAAE;YACpB,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACf,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACrB,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CACtC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,EACf,EAAE,CAAC,QAAQ,CAAC;gBACP,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;YAC7C,CAAC,CAAC,CACL,CAAC,CAAC;SAEN;IAEL,CAAC;IA1ED;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;yCACL;IAHR,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA8E5B;IAAD,eAAC;CA9ED,AA8EC,CA9EqC,EAAE,CAAC,SAAS,GA8EjD;kBA9EoB,QAAQ","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property({type:cc.AudioClip})\n    bgm: cc.AudioClip = null;\n\n    private isPaused = false;\n\n    onLoad () {\n        this.node.getChildByName('pause').active = false;\n        cc.audioEngine.playMusic(this.bgm, true);\n    }\n\n    start () {\n        // Keydown event trigger\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        \n    }\n\n    onDestroy() {\n        cc.audioEngine.stopMusic();\n    }\n\n    onKeyDown(e) {\n        switch (e.keyCode) {\n            case cc.macro.KEY.escape: {\n                cc.log(this.isPaused)\n                cc.log(this.node.parent)\n                if(!this.isPaused) {\n                    cc.log('pause')\n                    if(this.node.parent.getChildByName('dialog-box') != null) {\n                        this.node.parent.getChildByName('dialog-box').active = false;\n                    }\n                    cc.director.pause();\n                    this.node.getChildByName('pause').active = true;\n                    this.isPaused = true;\n                }\n                else {\n                    cc.log('resume')\n                    if(this.node.parent.getChildByName('dialog-box') != null) {\n                        this.node.parent.getChildByName('dialog-box').active = true;\n                    }\n                    cc.director.resume();\n                    this.node.getChildByName('pause').active = false;\n                    this.isPaused = false;\n                }\n                break;\n            }\n        }\n    }\n\n    pauseBtnClick(event, data) {\n        if(data == 'resume') {\n            cc.log('resume');\n            if(this.node.parent.getChildByName('dialog-box') != null) {\n                this.node.parent.getChildByName('dialog-box').active = true;\n            }\n            cc.director.resume();\n            this.node.getChildByName('pause').active = false;\n            this.isPaused = false;\n        }\n        else if(data == 'restart') {\n            cc.log('restart');\n            cc.director.resume();\n            cc.find(\"SceneManager\").getComponent(\"scene_manage\").die_reload();\n        }\n        else if(data == 'exit') {\n            cc.log('exit');\n            cc.director.resume();\n            cc.find(\"All Nodes\").runAction(cc.sequence(\n                cc.fadeOut(0.2), \n                cc.callFunc(function () {\n                     cc.director.loadScene('chapter select');\n                })\n            ));\n\n        }\n        \n    }\n}\n"]}