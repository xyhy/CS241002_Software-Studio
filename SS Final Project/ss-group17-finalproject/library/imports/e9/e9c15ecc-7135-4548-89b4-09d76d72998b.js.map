{"version":3,"sources":["../../../../assets/Script/assets/Script/platform_boss1.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class platform_boss1 extends cc.Component {\n\n    public dir: number = null;\n\n    \n    private state: number = null;\n    //1: spikes out\n\n    private cooldown: number = 0;\n    // LIFE-CYCLE CALLBACKS:\n\n    \n\n    start () {\n        //this.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 100);\n        if(this.dir == 0)\n            this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 70);\n        else if(this.dir == 1)\n            this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, -70);\n\n    }\n    \n    update(dt){\n        if(this.node.getChildByName('spikes'))\n            this.state = this.node.getChildByName('spikes').getComponent('spikes').state;\n    }\n    \n    onBeginContact(contact, self, other){\n        if(other.node.name == 'ceiling'){\n            cc.log('touched ceiling');\n            this.destroy_plat();\n            return;\n        }\n        if(other.node.name != 'player')\n            contact.disabled = true;\n        if(contact.getWorldManifold().normal.y == -1 || contact.getWorldManifold().normal.x == 1 || contact.getWorldManifold().normal.x == -1){\n            contact.disabled = true;\n        }\n        if(other.node.name == 'player' && this.state && !this.cooldown){\n            cc.log('in state = 1');\n            this.cooldown = 1;\n            //cc.log('player_score -= 100');\n            other.getComponent('player_boss').dead = true;\n\n            this.scheduleOnce(()=>{\n                this.cooldown = 0;\n            }, 1);\n        }\n    }\n    \n    onPreSolve(contact, self, other){\n        if(other.node.name != 'player')\n            contact.disabled = true;\n        if(contact.getWorldManifold().normal.y == -1 || contact.getWorldManifold().normal.x == 1 || contact.getWorldManifold().normal.x == -1){\n            contact.disabled = true;\n        }\n    }\n\n    destroy_plat(){\n        cc.log('destroy');\n        this.node.destroy();\n    }\n}\n"]}