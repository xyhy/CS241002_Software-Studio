{"version":3,"sources":["../../../../assets/Script/assets/Script/player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class player extends cc.Component {\n\n    // @property()\n    // FallG: number = 0; //Gravity\n    @property()\n    speedupA: number = 0; //speed increase rate\n    @property()\n    speeddownA: number = 0; //speed decrease rate\n\n\n    @property()\n    public maxSpeedX: number = 0; //max x-axis move\n    @property()\n    public maxSpeedY: number = 900; //fall down max speed\n    // @property(cc.Integer)\n    // public jumpSpeed: number = 50; //affect jump height\n    @property(cc.Integer)\n    public dashSpeed: number = 40; // shoot for dash\n    @property(cc.Prefab)\n    private bulletPrefab: cc.Prefab = null;\n\n\n    private _currentSpeedX: number = 0;\n    // private _currentSpeedY: number = 0;\n\n    private up = false;\n    private shoot = false;\n    private left: number = 0;\n    private right: number = 0;\n\n    private dead: boolean = false;\n\n    private onGround = false;\n    private is_falling = false;\n\n    private airshoot: boolean = false;\n\n    private rebornPosition = cc.v2();\n\n    private spring_jumping: boolean = false; \n    private spring_force: cc.Vec2 = cc.v2();\n    private wind_floating: boolean = false;\n    private wind_force: cc.Vec2 = cc.v2();\n\n\n    onLoad() {\n        cc.director.getPhysicsManager().enabled = true;\n    }\n\n    start() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        this.rebornPosition = this.node.position;\n    }\n\n    update(dt) {\n        this.playermoveX();\n        this.playermoveY();\n        this.object_effect(dt);\n        this.playerAnimation();\n        //this.getComponent(cc.RigidBody).linearVelocity = cc.v2(this._currentSpeedX, this._currentSpeedY);\n        this.node.x += this._currentSpeedX;\n        // this.node.y += this._currentSpeedY;\n        cc.log(this._currentSpeedX);\n    }\n\n    onKeyDown(event) \n    {\n        if(event.keyCode == cc.macro.KEY.left) {\n            this.left = 1;\n            if(this.right==1 || this.right==2) this.right = 2;\n            else this.right = 0;\n\n        } else if(event.keyCode == cc.macro.KEY.right) {\n            this.right = 1;\n            if(this.left==1 || this.left==2) this.left = 2;\n            else this.left = 0;\n\n        } else if(event.keyCode == cc.macro.KEY.space) {\n            this.up = true;\n\n        } else if(event.keyCode == cc.macro.KEY.enter) {\n            this.shoot = true;\n            this.createBullet();\n        }\n    }\n\n    onKeyUp(event) {\n        if(event.keyCode == cc.macro.KEY.right){\n            this.right = 0;\n            if(this.left==2) this.left=1;\n        }\n        else if(event.keyCode == cc.macro.KEY.left){\n            this.left = 0;\n            if(this.right==2) this.right=1;\n        }\n        else if(event.keyCode == cc.macro.KEY.space){\n            this.up = false;\n        }\n        else if(event.keyCode == cc.macro.KEY.enter){\n            this.shoot = false;\n        }\n    }\n\n    playermoveX() {\n        if(this.left==1){\n            if(this._currentSpeedX <= -this.maxSpeedX){\n                this._currentSpeedX = -this.maxSpeedX;\n            }else{\n                this._currentSpeedX -= this.speedupA;\n            }\n        }else if(this.right==1){\n            if(this._currentSpeedX >= this.maxSpeedX){\n                this._currentSpeedX = this.maxSpeedX;\n            }else{\n                this._currentSpeedX += this.speedupA;\n            }\n        }else{\n            if(this._currentSpeedX != 0){\n                if(this._currentSpeedX > 0 && this._currentSpeedX > this.speeddownA){\n                    this._currentSpeedX -= this.speeddownA;\n                }else if(this._currentSpeedX > 0 && this._currentSpeedX <= this.speeddownA){\n                    this._currentSpeedX = 0;\n                }else if(this._currentSpeedX < 0 && this._currentSpeedX < -this.speeddownA){\n                    this._currentSpeedX += this.speeddownA;\n                }else if(this._currentSpeedX < 0 && this._currentSpeedX >= -this.speeddownA){\n                    this._currentSpeedX = 0;\n                }\n            }\n        }\n    }\n\n    playermoveY(){\n        if(this.up && this.onGround){\n            this.jump();\n        }else{\n            this.playerfall();\n        }\n    }\n\n    playerAnimation(){\n        this.node.scaleX = (this.left) ? -1 : (this.right) ? 1 : this.node.scaleX;\n    }\n\n    dash(){\n        let move = null;\n        if(this.node.scaleX > 0){\n            move = cc.moveBy(0.1, -1 * this.dashSpeed, 0)\n        }else{\n            move = cc.moveBy(0.1, this.dashSpeed, 0)\n        }\n        this.node.runAction(move);\n    }\n\n    playerfall(){\n        var origin_x = this.getComponent(cc.RigidBody).linearVelocity.x;\n        var origin_y = this.getComponent(cc.RigidBody).linearVelocity.y;\n        if(!this.onGround && origin_y <= 0) this.is_falling = true;\n        \n        if(!this.onGround && origin_y >= this.maxSpeedY){\n            this.getComponent(cc.RigidBody).linearVelocity = cc.v2(origin_x, this.maxSpeedY);\n        }\n        /*if(!this.onGround){\n            this._currentSpeedY -= this.G;\n            if(this._currentSpeedY <= this.maxSpeedY){\n                this._currentSpeedY = this._currentSpeedY;\n            }\n        }else{\n            this._currentSpeedY = 0;\n        }*/\n    }\n\n    jump(){\n        this.onGround = false;\n        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 900);\n    }\n\n    reborn(){\n        if(this.dead){\n            this._currentSpeedX = 0;\n            this.node.position = this.rebornPosition;\n        }\n    }\n\n\n    createBullet()\n    {\n        if(this.onGround){\n            let bullet = cc.instantiate(this.bulletPrefab);\n            bullet.getComponent('bullet').init(this.node);\n            this.dash();\n            this.airshoot = false;\n        }else{\n            if(this.airshoot){\n\n            }else{\n                let bullet = cc.instantiate(this.bulletPrefab);\n                bullet.getComponent('bullet').init(this.node);\n                this.dash();\n                this.airshoot = true;\n            }\n        }\n    }\n\n    onBeginContact(contact, self, other){\n        if(other.tag == 1){\n            this.onGround = true;\n            this.airshoot = false;\n        }else if(other.tag==2 || other.tag==3){\n            this.dead = true;\n            this.reborn();\n        }\n    }\n\n    onEndContact(contact, self, other){\n        if(other.tag == 1){\n            this.onGround = false;\n        }\n    }\n\n    regain(){\n        this.airshoot = false;\n    }\n\n    call_spring_jump(f :cc.Vec2){\n        cc.log(f);\n        this.spring_jumping = true;\n        this.spring_force = f;\n    }\n\n    call_wind_floating(f :cc.Vec2, wind_switch: boolean){\n        this.wind_floating = wind_switch;\n        if(wind_switch) this.wind_force = f;\n    }\n\n    object_effect(dt:number){\n        let origin_v = this.node.getComponent(cc.RigidBody).linearVelocity;\n        if(this.spring_jumping){\n            this.spring_jumping = false;\n            this._currentSpeedX = this.spring_force.x/30;\n            this.getComponent(cc.RigidBody).linearVelocity = cc.v2(origin_v.x, this.spring_force.y/2);\n            this.airshoot = false;\n        }\n        if(this.wind_floating){\n            this.node.getComponent(cc.RigidBody).linearVelocity = origin_v.add(this.wind_force);\n            cc.log(\"winding: \" + this.wind_force.y);\n            this.wind_floating = false;\n        }\n    }\n}"]}