{"version":3,"sources":["../../../../assets/Script/assets/Script/regain_gem.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAuC,6BAAY;IADnD;QAAA,qEAgDC;QA9CkC,sBAAgB,GAAiB,IAAI,CAAC;QAChD,qBAAe,GAAc,IAAI,CAAC;QAC/C,eAAS,GAAW,KAAK,CAAC;;IA4CtC,CAAC;IA1CG,0BAAM,GAAN;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3B,CAAC;IAED,iBAAiB;IAEjB,yBAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;IACnC,CAAC;IAED,kCAAc,GAAd,UAAe,OAAyB,EAAE,IAAgB,EAAE,KAAiB;QAA7E,iBAcC;QAbG,IAAG,CAAC,IAAI,CAAC,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAC;YAC9C,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,MAAM,EAAE,CAAC;YAChD,2BAA2B;YAE3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;YACxD,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAC9B,IAAI,CAAC,YAAY,CAAC;gBACd,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC/B,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YAC3B,CAAC,EAAC,CAAC,CAAC,CAAC;YACL,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;SAClC;IACL,CAAC;IAED,mCAAe,GAAf;QACI,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IAED,0CAAsB,GAAtB;QACI,IAAI,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7C,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IA7C8B;QAA9B,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;uDAAuC;IAChD;QAApB,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;sDAAmC;IAFtC,SAAS;QAD7B,OAAO;OACa,SAAS,CA+C7B;IAAD,gBAAC;CA/CD,AA+CC,CA/CsC,EAAE,CAAC,SAAS,GA+ClD;kBA/CoB,SAAS","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class RegainGem extends cc.Component {\n    @property({type:cc.AudioClip}) regain_gem_sound :cc.AudioClip = null;\n    @property(cc.Prefab) vanish_particle :cc.Prefab = null;\n    private is_hiding:boolean = false;\n\n    onLoad () {\n        this.reset();\n        this.object_floating();\n    }\n\n    // update (dt) {}\n\n    reset(){\n        this.is_hiding = false;\n        this.unscheduleAllCallbacks();\n        this.node.runAction(cc.show());\n    }\n\n    onBeginContact(contact:cc.PhysicsContact, self:cc.Collider, other:cc.Collider){\n        if(!this.is_hiding && other.node.name == \"player\"){\n            other.node.getComponent(\"player_boss\").regain();\n            // cc.log(\"player regain\");\n\n            this.is_hiding = true;\n            cc.audioEngine.playEffect(this.regain_gem_sound, false);\n            this.create_vanish_particle();\n            this.scheduleOnce(()=>{\n                this.node.runAction(cc.show());\n                this.is_hiding = false;\n            },5);\n            this.node.runAction(cc.hide());\n        }\n    }\n\n    object_floating() {\n        let a = cc.moveBy(1.5, cc.v2(0,5));\n        let b = cc.moveBy(1.5, cc.v2(0,-5));\n        a.easing(cc.easeCubicActionInOut());\n        b.easing(cc.easeCubicActionInOut());\n        this.node.runAction(cc.repeatForever(cc.sequence(a,b)));\n    }\n\n    create_vanish_particle(){\n        let p = cc.instantiate(this.vanish_particle);\n        p.position = this.node.position;\n        this.node.parent.addChild(p);\n    }\n}\n"]}