{"version":3,"sources":["../../../../assets/Script/assets/Script/brush.ts"],"names":[],"mappings":";;;;;AACM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEAmFC;QA9EG,gBAAU,GAAoB,EAAE,CAAC;QAGjC,cAAQ,GAAgB,IAAI,CAAC;QAG7B,YAAM,GAAY,IAAI,CAAC;QAEf,mBAAa,GAAiB,IAAI,CAAC;QACnC,iBAAW,GAAiB,IAAI,CAAC;;IAqE7C,CAAC;IAnEG,wBAAwB;IAExB,yBAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACnD,CAAC;IAED,wBAAK,GAAL;QACI,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAA;IACzD,CAAC;IAED,iBAAiB;IAEjB,0BAAO,GAAP;QAEI,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACpE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAClE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;IACD,2BAAQ,GAAR;QAEI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACxE,CAAC;IACD,8BAAW,GAAX,UAAY,KAAK;QACb,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QAC3C,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;QAC9D,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5E,CAAC;IACD,6BAAU,GAAV,UAAW,KAAK;QACZ,6CAA6C;QAC7C,gEAAgE;QAEhE,mEAAmE;QACnE,yEAAyE;IAC7E,CAAC;IACD,4BAAS,GAAT,UAAU,KAAK;QACX,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QAC3C,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;QAC9D,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,GAAE,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QACvB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IACD,iCAAc,GAAd;QACI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC;QACtD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC;QAC/C,IAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC;QACpB,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC;QAC1B,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QACrC,WAAW,CAAC,QAAQ,GAAG,GAAG,CAAC;QAC3B,WAAW,CAAC,OAAO,GAAG,CAAC,CAAC;QACxB,WAAW,CAAC,KAAK,EAAE,CAAC;IACxB,CAAC;IACD,iCAAc,GAAd,UAAe,SAAS,EAAE,QAAQ;QAC9B,OAAO,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC;IAC/C,CAAC;IA7ED;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAC,CAAC;gDACM;IAGjC;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;8CACO;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACK;IAVN,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAkF5B;IAAD,eAAC;CAlFD,AAkFC,CAlFqC,EAAE,CAAC,SAAS,GAkFjD;kBAlFoB,QAAQ","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n\n    @property({type:[cc.Vec2]})\n    line_point:  Array<cc.Vec2> = [];\n\n    @property(cc.Graphics)\n    graphics: cc.Graphics = null;\n\n    @property(cc.Node)\n    camera: cc.Node = null;\n\n    private rigibodyLogic: cc.RigidBody = null;\n    private physicsLine: cc.Component = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.width = cc.winSize.width;\n        this.node.height = cc.winSize.height;\n        this.graphics = this.getComponent(cc.Graphics);\n    }\n\n    start () {\n        this.onTouch();\n        this.camera = cc.find('All Nodes/Canvas/Main Camera')\n    }\n\n    // update (dt) {}\n\n    onTouch()\n    {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touch_start, this);\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.touch_move, this);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.touch_end, this);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.touch_end, this);\n    }\n    offTouch()\n    {\n        this.node.off(cc.Node.EventType.TOUCH_START, this.touch_start, this);\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this.touch_move, this);\n        this.node.off(cc.Node.EventType.TOUCH_END, this.touch_end, this);\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.touch_end, this);\n    }\n    touch_start(event) {\n        var camera_pos = this.camera.getPosition();\n        let pos = this.node.convertToNodeSpaceAR(event.getLocation());\n        this.graphics.moveTo(camera_pos.x + pos.x, camera_pos.y + pos.y);\n        this.line_point.push(cc.v2(camera_pos.x + pos.x, camera_pos.y + pos.y));\n    }\n    touch_move(event) {\n        //var camera_pos = this.camera.getPosition();\n        //let pos = this.node.convertToNodeSpaceAR(event.getLocation());\n        \n        //this.graphics.lineTo(camera_pos.x + pos.x, camera_pos.y + pos.y);\n        //this.line_point.push(cc.v2(camera_pos.x +pos.x, camera_pos.y + pos.y));\n    }\n    touch_end(event) {\n        var camera_pos = this.camera.getPosition();\n        let pos = this.node.convertToNodeSpaceAR(event.getLocation());\n        this.graphics.lineTo(camera_pos.x + pos.x, camera_pos.y + pos.y);\n        this.line_point.push(cc.v2(camera_pos.x +pos.x, camera_pos.y + pos.y));\n        this.graphics.stroke();\n        this.createRigibody();\n        this.offTouch();\n    }\n    createRigibody() {\n        cc.log(this.line_point);\n        this.node.addComponent(cc.RigidBody);\n        this.node.getComponent(cc.RigidBody).gravityScale = 4;\n        this.node.addComponent(\"BrushPhysicsCollider\");\n        var physicsLine = this.node.getComponent(\"BrushPhysicsCollider\");\n        physicsLine.tag = 1;\n        physicsLine.lineWidth = 6;\n        physicsLine.points = this.line_point;\n        physicsLine.friction = 0.2;\n        physicsLine.density = 1;\n        physicsLine.apply();\n    }\n    checkIsCanDraw(lastPoint, nowPoint) {\n        return lastPoint.sub(nowPoint).mag() >= 20;\n    }\n}"]}