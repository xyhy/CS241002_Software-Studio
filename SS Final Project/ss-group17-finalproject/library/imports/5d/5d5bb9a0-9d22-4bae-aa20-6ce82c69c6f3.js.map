{"version":3,"sources":["../../../../assets/Script/assets/Script/spring.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Spring extends cc.Component {\n    @property(cc.Boolean) is_vertical: boolean = true;\n    @property(cc.Integer) jump_force: number = 20;\n    @property({type:cc.AudioClip}) spring_jump_sound :cc.AudioClip = null;\n    private time_buffer = false;\n\n    onBeginContact(contact:cc.PhysicsContact, self:cc.Collider, other:cc.Collider){\n        if(other.node.name == \"player\" && !this.time_buffer){\n            // cc.log(\"(\"+contact.getWorldManifold().normal.x + \",\" + contact.getWorldManifold().normal.y + \")\");\n            let other_pos = other.node.position;\n            let my_pos = this.node.position;\n            if(this.is_vertical && (other_pos.y > my_pos.y + this.node.height/2 || other_pos.y < my_pos.y - this.node.height/2)){\n                let dir = (other_pos.y > my_pos.y)? 1 : -1;\n                other.node.getComponent(\"player_boss\").call_spring_jump(cc.v2(0, this.jump_force * dir));\n                this.node.getComponent(cc.Animation).play(\"spring_dwai\");\n                cc.audioEngine.playEffect(this.spring_jump_sound, false);\n                this.time_buffer = true;\n                this.scheduleOnce(()=>{this.time_buffer = false}, 0.1);\n            }\n            else if(!this.is_vertical && (other_pos.x > my_pos.x + this.node.width/2 || other_pos.x < my_pos.x - this.node.width/2)){\n                let dir = (other_pos.x > my_pos.x)? 1 : -1;\n                other.node.getComponent(\"player_boss\").call_spring_jump(cc.v2(this.jump_force*dir/2, this.jump_force));\n                this.node.getComponent(cc.Animation).play(\"spring_dwai\");\n                cc.audioEngine.playEffect(this.spring_jump_sound, false);\n                this.time_buffer = true;\n                this.scheduleOnce(()=>{this.time_buffer = false}, 0.1);\n            }\n            else{\n                // cc.log(\"hit middle of spring\");\n            }\n        }\n    }\n}\n"]}