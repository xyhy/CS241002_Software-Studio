{"version":3,"sources":["strawberry.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAwC,8BAAY;IADpD;QAAA,qEA+CC;QA7CoC,WAAK,GAAmB,IAAI,CAAC;QAC7B,WAAK,GAAmB,IAAI,CAAC;QACxC,cAAQ,GAAY,KAAK,CAAC;QACjB,eAAS,GAAiB,IAAI,CAAC;QACzC,qBAAe,GAAc,IAAI,CAAC;QAC/C,eAAS,GAAW,KAAK,CAAC;;IAwCtC,CAAC;IAtCG,0BAAK,GAAL;QACI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,oBAAoB,EAAE,CAAC;QAC5F,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3B,CAAC;IAED,iBAAiB;IAEjB,0BAAK,GAAL;QACI,IAAG,IAAI,CAAC,QAAQ;YAAE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;;YACxE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;IACnC,CAAC;IAED,mCAAc,GAAd,UAAe,OAAyB,EAAE,IAAgB,EAAE,KAAiB;QACzE,IAAG,CAAC,IAAI,CAAC,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAC;YAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAC/B,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAC9B,IAAG,CAAC,IAAI,CAAC,QAAQ;gBAAE,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,uBAAuB,EAAE,CAAC;SACrG;IACL,CAAC;IAED,oCAAe,GAAf;QACI,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IAED,2CAAsB,GAAtB;QACI,IAAI,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7C,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IA5CgC;QAAhC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,WAAW,EAAC,CAAC;6CAA8B;IAC7B;QAAhC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,WAAW,EAAC,CAAC;6CAA8B;IACxC;QAArB,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;gDAA2B;IACjB;QAA9B,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;iDAAgC;IACzC;QAApB,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;uDAAmC;IALtC,UAAU;QAD9B,OAAO;OACa,UAAU,CA8C9B;IAAD,iBAAC;CA9CD,AA8CC,CA9CuC,EAAE,CAAC,SAAS,GA8CnD;kBA9CoB,UAAU","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import SceneManage from \"./scene_manage\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Strawberry extends cc.Component {\n    @property({type:cc.SpriteFrame}) eaten: cc.SpriteFrame = null;\n    @property({type:cc.SpriteFrame}) fresh: cc.SpriteFrame = null;\n    @property(cc.Boolean) is_eaten :boolean = false;\n    @property({type:cc.AudioClip}) eat_sound :cc.AudioClip = null;\n    @property(cc.Prefab) vanish_particle :cc.Prefab = null;\n    private is_hiding:boolean = false;\n\n    start () {\n        this.is_eaten = cc.find(\"SceneManager\").getComponent(\"scene_manage\").get_strawberry_state();\n        this.reset();\n        this.object_floating();\n    }\n    \n    // update (dt) {}\n    \n    reset(){\n        if(this.is_eaten) this.node.getComponent(cc.Sprite).spriteFrame = this.eaten; \n        else this.node.getComponent(cc.Sprite).spriteFrame = this.fresh;\n        this.is_hiding = false;\n        this.node.runAction(cc.show());\n    }\n\n    onBeginContact(contact:cc.PhysicsContact, self:cc.Collider, other:cc.Collider){\n        if(!this.is_hiding && other.node.name == \"player\"){\n            this.is_hiding = true;\n            this.node.runAction(cc.hide());\n            cc.audioEngine.playEffect(this.eat_sound, false);\n            this.create_vanish_particle();\n            if(!this.is_eaten) cc.find(\"SceneManager\").getComponent(\"scene_manage\").update_strawberry_state();\n        }\n    }\n\n    object_floating() {\n        let a = cc.moveBy(1.5, cc.v2(0,5));\n        let b = cc.moveBy(1.5, cc.v2(0,-5));\n        a.easing(cc.easeCubicActionInOut());\n        b.easing(cc.easeCubicActionInOut());\n        this.node.runAction(cc.repeatForever(cc.sequence(a,b)));\n    }\n\n    create_vanish_particle(){\n        let p = cc.instantiate(this.vanish_particle);\n        p.position = this.node.position;\n        this.node.parent.addChild(p);\n    }\n}\n"]}