{"version":3,"sources":["final.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class extends cc.Component {\n\n    @property(cc.Prefab)\n    dialog: cc.Prefab = null;\n\n    @property({type:cc.AudioClip})\n    bgm: cc.AudioClip = null;\n\n    @property(cc.Node)\n    player: cc.Node = null;\n\n    @property(cc.Node)\n    nurse: cc.Node = null;\n\n    private dialogue_cnt: number = 0;\n    private anim_2: boolean = false;\n    private anim_5: boolean = false;\n    private stopUpdate: boolean = false;\n\n    public dialogue_final = [{role:'我', content:'嗚...這裡是...'},\n    {role:'護士', content: '這裡是醫院，你被直昇機載到這裡之後已經昏睡三天了'},\n    {role:'我', content:'...學姊呢？跟我一起的一個大學女生？'},\n    {role:'護士', content: '很遺憾，我們到現場時他已經...'},\n    {role:'我', content:'是嗎...'},\n    {role:'護士', content: '（醫生，六號床的患者已經醒了...噢？她的母親？他才剛醒來，可能先不要給他太多刺激比較好...）'}];\n    \n    onLoad () {\n        cc.audioEngine.playMusic(this.bgm, true);\n        cc.find('ending').active = false;\n    }\n\n    start () {\n        var dialog_box = cc.instantiate(this.dialog);\n        dialog_box.parent = this.node;\n        dialog_box.getComponent('dialogue').init(this.dialogue_final);\n        //cc.find('Canvas/dialog-cover').on(cc.Node.EventType.MOUSE_DOWN, this.changeDialog, this);\n        this.nurse.runAction(cc.sequence(cc.fadeIn(0.3),cc.moveBy(0.6, -100, -40), cc.moveBy(1.1, -160, 0)));\n        this.nurse.getComponent(cc.Animation).play('nurse_walk');\n        this.scheduleOnce(function() {\n            this.nurse.getComponent(cc.Animation).stop();\n        }, 2);\n    }\n    update(dt) {\n        if(this.stopUpdate) return;\n        if(this.node.getComponentInChildren('dialogue').textIndex == 2) {\n            if(!this.anim_2) {\n                this.player.runAction(cc.moveBy(0.4, 100, 0));\n                this.player.getComponent(cc.Animation).play('playerb_run');\n                this.scheduleOnce(function() {\n                    this.player.getComponent(cc.Animation).stop();\n                    this.player.getComponent(cc.Animation).play('playerb_idle');\n                }, 0.4);\n            }\n            this.anim_2 = true;\n        }\n        if(this.node.getComponentInChildren('dialogue').textIndex == 5) {\n            if(!this.anim_5){\n                this.nurse.scaleX = -3.2;\n                this.nurse.runAction(cc.sequence(cc.moveBy(1.1, 160, 0), cc.moveBy(0.6, 100, 40)));\n                this.nurse.getComponent(cc.Animation).play('nurse_walk');\n                this.scheduleOnce(function() {\n                    this.nurse.runAction(cc.fadeOut(0.2));\n                    }, 1.8);\n            }\n            this.anim_5 = true;\n        }\n        if(this.node.getComponentInChildren('dialogue').isEnd) {\n            cc.log('end');\n            this.scheduleOnce(function() {\n                this.node.runAction(cc.fadeOut(0.2));\n            }, 1)\n            this.scheduleOnce(function() {\n                cc.find('ending').active = true;\n                cc.find('ending').runAction(cc.fadeIn(0.5));\n            }, 1.2)\n            this.scheduleOnce(function() {\n                cc.find(\"SceneManager\").getComponent(\"scene_manage\").change_scene(\"chapter select\", \"fade\");\n            }, 6);\n            this.node.getComponentInChildren('dialogue').isEnd = false;\n            this.stopUpdate = true;\n        }\n    }\n}\n"]}