{"version":3,"sources":["door.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEA2CC;QAzCuB,cAAQ,GAAW,CAAC,CAAC;QACV,qBAAe,GAAiB,IAAI,CAAC;QAC9C,mBAAa,GAAW,CAAC,CAAC;QACxC,eAAS,GAAY,KAAK,CAAC;QAC3B,UAAI,GAAY,IAAI,CAAC;QACrB,UAAI,GAAY,IAAI,CAAC;QACrB,YAAM,GAAY,IAAI,CAAC;;QAkC/B,iBAAiB;IACrB,CAAC;IAjCG,qBAAM,GAAN;QACI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAED,oBAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAChC,IAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,IAAI,IAAI,EAAC;YACrD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC;YAC9C,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;YAChF,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;SACrE;QACD,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC,KAAK,EAAE,CAAC;IACtD,CAAC;IAED,6BAAc,GAAd;QACI,IAAG,CAAC,IAAI,CAAC,SAAS,EAAC;YACf,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAG,IAAI,CAAC,aAAa,IAAI,CAAC,EAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACnE,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC;gBACjD,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;aAC1D;SACJ;IACL,CAAC;IAtCmB;QAAnB,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;0CAAsB;IACV;QAA9B,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;iDAAsC;IAC9C;QAArB,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;+CAA2B;IAH/B,IAAI;QADxB,OAAO;OACa,IAAI,CA0CxB;IAAD,WAAC;CA1CD,AA0CC,CA1CiC,EAAE,CAAC,SAAS,GA0C7C;kBA1CoB,IAAI","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Door extends cc.Component {\n    @property(cc.Float) duration :number = 2;\n    @property({type:cc.AudioClip}) gate_open_sound :cc.AudioClip = null;\n    @property(cc.Integer) button_number :number = 1;\n    private is_opened :boolean = false;\n    private mask :cc.Node = null;\n    private body :cc.Node = null;\n    private button :cc.Node = null;\n\n    onLoad () {\n        this.mask = this.node.getChildByName(\"mask\");\n        this.body = this.mask.getChildByName(\"body\");\n        this.button = this.node.getChildByName(\"button\");\n        this.mask.setContentSize(this.body.getContentSize());\n        this.reset();\n    }\n\n    reset(){\n        this.is_opened = false;\n        this.body.position = cc.v2(0,0);\n        if(this.body.getComponent(cc.PhysicsBoxCollider) == null){\n            this.body.addComponent(cc.PhysicsBoxCollider);\n            this.body.getComponent(cc.PhysicsBoxCollider).size = this.body.getContentSize();\n            this.body.getComponent(cc.PhysicsBoxCollider).offset = cc.v2(0,0);\n        }\n        this.unscheduleAllCallbacks();\n        this.button.getComponent(\"button_object\").reset();\n    }\n\n    button_pressed(){\n        if(!this.is_opened){\n            this.button_number--;\n            if(this.button_number == 0){\n                this.is_opened = true;\n                this.body.runAction(cc.moveBy(this.duration, 0, this.body.height));\n                this.body.removeComponent(cc.PhysicsBoxCollider);\n                cc.audioEngine.playEffect(this.gate_open_sound, false);\n            }\n        }\n    }\n\n    // update (dt) {}\n}\n"]}