{"version":3,"sources":["brush_object.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAyC,+BAAY;IADrD;QAAA,qEAyCC;QAvCkC,iBAAW,GAAiB,IAAI,CAAC;QAC3C,qBAAe,GAAc,IAAI,CAAC;QAC/C,eAAS,GAAG,KAAK,CAAC;;IAqC9B,CAAC;IAnCG,2BAAK,GAAL;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3B,CAAC;IAED,2BAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;IACnC,CAAC;IAED,qCAAe,GAAf;QACI,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IAED,oCAAc,GAAd,UAAe,OAAyB,EAAE,IAAgB,EAAE,KAAiB;QACzE,IAAG,CAAC,IAAI,CAAC,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAC;YAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAC/B,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAC9B,IAAG,EAAE,CAAC,IAAI,CAAC,sCAAsC,CAAC,IAAI,IAAI;gBAAE,EAAE,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,cAAc,EAAE,CAAC;;gBACjJ,EAAE,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;SACrC;IACL,CAAC;IAED,4CAAsB,GAAtB;QACI,IAAI,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7C,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IAtC8B;QAA9B,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;oDAAkC;IAC3C;QAApB,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wDAAmC;IAFtC,WAAW;QAD/B,OAAO;OACa,WAAW,CAwC/B;IAAD,kBAAC;CAxCD,AAwCC,CAxCwC,EAAE,CAAC,SAAS,GAwCpD;kBAxCoB,WAAW","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BrushObject extends cc.Component {\n    @property({type:cc.AudioClip}) brush_sound :cc.AudioClip = null;\n    @property(cc.Prefab) vanish_particle :cc.Prefab = null;\n    private is_hiding = false;\n\n    start () {\n        this.reset();\n        this.object_floating();\n    }\n\n    reset(){\n        this.is_hiding = false;\n        this.unscheduleAllCallbacks();\n        this.node.runAction(cc.show());\n    }\n\n    object_floating() {\n        let a = cc.moveBy(1.5, cc.v2(0,5));\n        let b = cc.moveBy(1.5, cc.v2(0,-5));\n        a.easing(cc.easeCubicActionInOut());\n        b.easing(cc.easeCubicActionInOut());\n        this.node.runAction(cc.repeatForever(cc.sequence(a,b)));\n    }\n\n    onBeginContact(contact:cc.PhysicsContact, self:cc.Collider, other:cc.Collider){\n        if(!this.is_hiding && other.node.name == \"player\"){\n            this.is_hiding = true;\n            this.node.runAction(cc.hide());\n            cc.audioEngine.playEffect(this.brush_sound, false);\n            this.create_vanish_particle();\n            if(cc.find('All Nodes/Canvas/Main Camera/brushUI') != null) cc.find('All Nodes/Canvas/Main Camera/brushUI').getComponent('brush_UI').createGraphics();\n            else cc.log(\"brushUI is null!!!\");\n        }\n    }\n\n    create_vanish_particle(){\n        let p = cc.instantiate(this.vanish_particle);\n        p.position = this.node.position;\n        this.node.parent.addChild(p);\n    }\n}\n"]}